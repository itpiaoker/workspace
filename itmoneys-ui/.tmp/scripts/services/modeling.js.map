{"version":3,"sources":["services/modeling.js"],"names":["app","factory","$resource","download","method","transformResponse","data","obj","JSON","parse","jobId","response","blob","Blob","stringify","type","headers","operate","url","params","opt","id","timeout","check","isArray","connectTest","queryByType","service","resetFormValidateState","form","$submitted","angular","forEach","key","substring","$dirty","$pristine"],"mappings":"AAAA;;AACAA,IAAIC,QAAQ,0BAAY,UAAUC,WAAW;IACzC,OAAOA,UAAU,iBAAiB,IAAI;QAClCC,UAAU;YACNC,QAAQ;;YAERC,mBAAmB,SAAA,kBAAUC,MAAM;gBAC/B,IAAIC,MAAMC,KAAKC,MAAMH;gBACrB,IAAIC,IAAIG,OAAO;oBACX,OAAOH,IAAIG;;;gBAGf,IAAIC,WAAW;gBACf,IAAIC,OAAO,IAAIC,KAAK,CAACL,KAAKM,UAAUP,OAAM,EAACQ,MAAK;gBAChDJ,SAASL,OAAOM;gBAChBD,SAASK,UAAU;oBACf,uBAAuB;;;gBAG3B,OAAOL;;;QAGfM,SAAS;YACLb,QAAQ;YACRc,KAAK;YACLC,QAAQ;gBACJC,KAAK;gBACLC,IAAI;;YAERC,SAAS;;QAEbC,OAAO;YACHnB,QAAQ;YACRc,KAAK;YACLM,SAAS;YACTF,SAAS;;QAEbG,aAAa;YACTrB,QAAQ;YACRc,KAAK;YACLI,SAAS;;QAEbI,aAAa;YACTtB,QAAQ;YACRc,KAAK;YACLM,SAAS;YACTF,SAAS;;;;;AAKrBtB,IAAI2B,QAAQ,QAAQ,YAAY;;;;;;IAM5B,KAAKC,yBAAyB,UAAUC,MAAM;QAC1C,IAAI,CAACA,MAAM,OAAO;QAClBA,KAAKC,aAAa;QAClBC,QAAQC,QAAQH,MAAM,UAAUtB,KAAK0B,KAAK;YACtC,IAAIA,IAAIC,UAAU,GAAG,OAAO,OAAOL,KAAKI,KAAKE,QAAQ;gBACjDN,KAAKI,KAAKE,SAAS;gBACnBN,KAAKI,KAAKG,YAAY;;;;GAZtC","file":"modeling.js","sourcesContent":["'use strict';\r\napp.factory('Modeling', function ($resource) {\r\n    return $resource('/modeling/:id', {}, {\r\n        download: {\r\n            method: 'GET',\r\n            // responseType: 'blob',\r\n            transformResponse: function (data) {\r\n                var obj = JSON.parse(data);\r\n                if (obj.jobId) {\r\n                    delete obj.jobId\r\n                }\r\n                //MESS WITH THE DATA\r\n                let response = {};\r\n                var blob = new Blob([JSON.stringify(obj)],{type:\"application/json\"});\r\n                response.data = blob;\r\n                response.headers = {\r\n                    'Content-Disposition': 'attachment'\r\n\r\n                };\r\n                return response;\r\n            }\r\n        },\r\n        operate: {\r\n            method: 'PUT',\r\n            url: '/modeling/:opt/:id',\r\n            params: {\r\n                opt: '@opt',\r\n                id: '@id'\r\n            },\r\n            timeout: 20000\r\n        },\r\n        check: {\r\n            method: 'POST',\r\n            url: '/usability',\r\n            isArray: true,\r\n            timeout: 20000\r\n        },\r\n        connectTest: {\r\n            method: 'POST',\r\n            url: '/modeling/check',\r\n            timeout: 20000\r\n        },\r\n        queryByType: {\r\n            method: 'GET',\r\n            url: '/modeling/type/:type',\r\n            isArray: true,\r\n            timeout: 20000\r\n        }\r\n\r\n    });\r\n});\r\napp.service('Util', function () {\r\n    /**\r\n     * 重置表单状态\r\n     * @param form\r\n     * @returns {boolean}\r\n     */\r\n    this.resetFormValidateState = function (form) {\r\n        if (!form) return false;\r\n        form.$submitted = false;\r\n        angular.forEach(form, function (obj, key) {\r\n            if (key.substring(0, 1) !== '$' && form[key].$dirty) {\r\n                form[key].$dirty = false;\r\n                form[key].$pristine = true;\r\n            }\r\n        });\r\n    };\r\n});\r\n"]}