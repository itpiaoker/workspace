{"version":3,"sources":["directives/datetimepicker.js"],"names":["app","directive","require","restrict","scope","datetimePicker","link","elem","attr","ngModel","defOptions","format","options","angular","merge","parent","hasClass","btn","find","length","click","datetimepicker","on","$setViewValue","value","$watch","n","o","dp","getInstance","defaultDate","date","viewDate","$render","$viewValue","moment","event","instance","element","target","viewMode","data"],"mappings":"AAAA;;;;;;;AAKAA,IAAIC,UAAU,kBAAkB,YAAY;;CAE1C,OAAO;EACNC,SAAS;EACTC,UAAU;EACDC,OAAO;GACZC,gBAAgB;;EAEpBC,MAAM,SAAA,KAAUF,OAAOG,MAAMC,MAAMC,SAAS;GAC3C,IAAIC,aAAW;IACdC,QAAQ;;GAET,IAAIC,UAAQC,QAAQC,MAAM,IAAGJ,YAAWN,MAAMC,kBAAgB;;GAE9D,IAAIU,SAAOR,KAAKQ;GAChB,IAAIA,OAAOC,SAAS,gBAAgB;IACnC,IAAIC,MAAI;;IAER,IAAIF,OAAOG,KAAK,qBAAqBC,WAAW,GAAG;KAClDF,MAAMF,OAAOG,KAAK;WACZ;KACND,MAAMF,OAAOG,KAAK;;IAEnBD,IAAIG,MAAM,YAAY;KACHb,KAAKc,eAAe;;;GAGxCd,KAAKc,eAAeT,SAASU,GAAG,aAAa,YAAY;IACxDb,QAAQc,cAAc,KAAKC;;GAE5BpB,MAAMqB,OAAO,kBAAkB,UAAUC,GAAGC,GAAG;IAC3C,IAAID,MAAMC,GAAG;IACD,IAAIC,KAAKC,YAAYtB;IACrBqB,GAAGhB,QAAQR,MAAMC;IACjB,IAAID,MAAMC,eAAeyB,aAAa;KAClCF,GAAGG,KAAK3B,MAAMC,eAAeyB;KAC7BF,GAAGI,SAAS5B,MAAMC,eAAeyB;;MAEtC;;GAEHrB,QAAQwB,UAAU,YAAW;IACzB,IAAIF,OAAKtB,QAAQyB,aAAWC,OAAO1B,QAAQyB,cAAY;IACvDL,YAAYtB,MAAMwB,KAAKA;;;GAGvCxB,KAAKe,GAAG,WAAW,UAAUc,OAAO;IACnC,IAAIC,WAAWR,YAAYhB,QAAQyB,QAAQF,MAAMG;IACjD,IAAIC,WAASH,SAASzB,UAAU4B;IACjB,IAAIA,YAAY,WAAWA,YAAY,UAAU;KAC/DH,SAASG,SAASA;;;;GAIpB,SAASX,YAAYS,SAAS;IACd,OAAOA,QAAQG,KAAK;;;;;GAtDxC","file":"datetimepicker.js","sourcesContent":["/**\r\n * Description: datetimepicker\r\n * Author: xinfeng_qian\r\n * Update: xinfeng_qian(2016-09-19 18:22)\r\n */\r\napp.directive('datetimePicker', function () {\r\n\r\n\t\treturn {\r\n\t\t\trequire: '?ngModel',\r\n\t\t\trestrict: 'AE',\r\n            scope: {\r\n\t\t\t    datetimePicker: '='\r\n            },\r\n\t\t\tlink: function (scope, elem, attr, ngModel) {\r\n\t\t\t\tlet defOptions={\r\n\t\t\t\t\tformat: 'YYYY-MM-DD HH:mm:ss'\r\n\t\t\t\t};\r\n\t\t\t\tlet options=angular.merge({},defOptions,scope.datetimePicker||{});\r\n\t\t\t\t//input-group里的按钮点击\r\n\t\t\t\tlet parent=elem.parent();\r\n\t\t\t\tif (parent.hasClass('input-group')) {\r\n\t\t\t\t\tlet btn=null;\r\n\t\t\t\t\t// in case there is more then one 'input-group-addon' Issue #48\r\n\t\t\t\t\tif (parent.find('.datepickerbutton').length === 0) {\r\n\t\t\t\t\t\tbtn = parent.find('.input-group-btn');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbtn = parent.find('.datepickerbutton');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbtn.click(function () {\r\n                        elem.datetimepicker('show');\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telem.datetimepicker(options).on('dp.change', function () {\r\n\t\t\t\t\tngModel.$setViewValue(this.value);\r\n\t\t\t\t});\r\n\t\t\t\tscope.$watch('datetimePicker', function (n, o) {\r\n\t\t\t\t    if (n === o) return;\r\n                    let dp = getInstance(elem);\r\n                    dp.options(scope.datetimePicker);\r\n                    if (scope.datetimePicker.defaultDate) {\r\n                        dp.date(scope.datetimePicker.defaultDate);\r\n                        dp.viewDate(scope.datetimePicker.defaultDate); // default viewDate is moment(), bug #1325\r\n                    }\r\n                }, true);\r\n\t\t\t\t//渲染\r\n                ngModel.$render = function() {\r\n                    let date=ngModel.$viewValue?moment(ngModel.$viewValue):null;\r\n                    getInstance(elem).date(date);\r\n                };\r\n\t\t\t\t//修复viewMode为years或months时显示days日期选择界面的bug\r\n\t\t\t\telem.on('dp.show', function (event) {\r\n\t\t\t\t\tlet instance = getInstance(angular.element(event.target));\r\n\t\t\t\t\tlet viewMode=instance.options().viewMode;\r\n                    if (viewMode == 'years' || viewMode == 'months') {\r\n\t\t\t\t\t\tinstance.viewMode(viewMode);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//获取实例\r\n\t\t\t\tfunction getInstance(element) {\r\n                    return element.data('DateTimePicker');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t});\r\n"]}