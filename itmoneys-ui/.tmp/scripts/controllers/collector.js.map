{"version":3,"sources":["controllers/collector.js"],"names":["app","controller","$scope","$rootScope","$location","$routeParams","Collector","CollectorOpt","$confirmModal","$","$path","path","bind","reload","list","get","page","delete","id","status","html","modal","operate","opt","rt","message","confirm_yes","find","off","click"],"mappings":"AAAA;;AAEAA,IAAIC,WAAW,0GAAuB,UAASC,QAAQC,YAAYC,WAAWC,cAAcC,WAAWC,cAAc;EACnH,IAAMC,gBAAgBC,EAAE;;EAExBN,WAAWO,QAAQN,UAAUO,KAAKC,KAAKR;EACvCF,OAAOW,SAAS,YAAW;IACzBX,OAAOY,OAAOR,UAAUS,IAAIb,OAAOc;;;EAGrCd,OAAOe,SAAS,UAASC,IAAIC,QAAQ;IACnCjB,OAAOgB,KAAKA;IACV,IAAGC,WAAS,eAAc;MACxBV,EAAE,+BAA+BW,KAAK;WACnC;MACDX,EAAE,+BAA+BW,KAAK;;IAE5CZ,cAAca,MAAM;;EAEtBnB,OAAOoB,UAAU,UAASC,KAAKL,IAAI;IACjCX,aAAae,QAAQ;MACnBJ,IAAIA;MACJK,KAAKA;OACJ,UAASC,IAAI;MACdtB,OAAOuB,UAAUD;MACjBtB,OAAOW;;;;EAIXX,OAAOwB,cAAc,YAAW;IAC9BpB,UAAUW,OAAO;MACfC,IAAIhB,OAAOgB;OACV,UAASM,IAAI;MACdtB,OAAOuB,UAAUD;MACjBtB,OAAOW;;IAETL,cAAca,MAAM;;EAEtBb,cAAcmB,KAAK,WAAWC,MAAMC,MAAM,YAAW;IACnD3B,OAAOwB;;IArCX","file":"collector.js","sourcesContent":["'use strict';\r\n\r\napp.controller('CollectorController', function($scope, $rootScope, $location, $routeParams, Collector, CollectorOpt) {\r\n  const $confirmModal = $('#collectModal');\r\n  //页面目录\r\n  $rootScope.$path = $location.path.bind($location);\r\n  $scope.reload = function() {\r\n    $scope.list = Collector.get($scope.page);\r\n  };\r\n  //删除按钮\r\n  $scope.delete = function(id, status) {\r\n    $scope.id = id;\r\n      if(status==='UNAVAILABLE'){\r\n        $('#collectModal .modal-body p').html('采集器不存在或者已经停止,删除有可能造成数据不一致,确认删除?')\r\n      }else{\r\n          $('#collectModal .modal-body p').html('确认要删除吗?')\r\n      }\r\n    $confirmModal.modal('show');\r\n  };\r\n  $scope.operate = function(opt, id) {\r\n    CollectorOpt.operate({\r\n      id: id,\r\n      opt: opt\r\n    }, function(rt) {\r\n      $scope.message = rt;\r\n      $scope.reload();\r\n    });\r\n  };\r\n  //删除确定\r\n  $scope.confirm_yes = function() {\r\n    Collector.delete({\r\n      id: $scope.id\r\n    }, function(rt) {\r\n      $scope.message = rt;\r\n      $scope.reload();\r\n    });\r\n    $confirmModal.modal('hide');\r\n  };\r\n  $confirmModal.find('.op_yes').off().click(function() {\r\n    $scope.confirm_yes();\r\n  });\r\n\r\n});\r\n"]}